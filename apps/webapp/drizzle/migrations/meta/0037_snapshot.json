{
  "id": "69220e56-ae98-41fa-b6d5-cf9088d0be7b",
  "prevId": "a87b6a9b-1ce0-4220-a1d7-291403c34449",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.evaluations": {
      "name": "evaluations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "evaluations_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "source": {
          "name": "source",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "run_id": {
          "name": "run_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "score": {
          "name": "score",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "file_id": {
          "name": "file_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "agreement_id": {
          "name": "agreement_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "offer_id": {
          "name": "offer_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "validator_id": {
          "name": "validator_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "provider_id": {
          "name": "provider_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "commit_hash": {
          "name": "commit_hash",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "session_id": {
          "name": "session_id",
          "type": "varchar(15)",
          "primaryKey": false,
          "notNull": false
        },
        "protocol_name": {
          "name": "protocol_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "protocol_address": {
          "name": "protocol_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "prompt_set_id": {
          "name": "prompt_set_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "finished_at": {
          "name": "finished_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "evaluations_file_id_files_id_fk": {
          "name": "evaluations_file_id_files_id_fk",
          "tableFrom": "evaluations",
          "tableTo": "files",
          "columnsFrom": [
            "file_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "evaluations_prompt_set_id_prompt_sets_id_fk": {
          "name": "evaluations_prompt_set_id_prompt_sets_id_fk",
          "tableFrom": "evaluations",
          "tableTo": "prompt_sets",
          "columnsFrom": [
            "prompt_set_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.file_chunks": {
      "name": "file_chunks",
      "schema": "",
      "columns": {
        "chunk_id": {
          "name": "chunk_id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "file_chunks_chunk_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "merge_id": {
          "name": "merge_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "file_chunks_merge_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "uploader_id": {
          "name": "uploader_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "file_chunks_uploader_id_users_id_fk": {
          "name": "file_chunks_uploader_id_users_id_fk",
          "tableFrom": "file_chunks",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "uploader_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.files": {
      "name": "files",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "files_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "cid": {
          "name": "cid",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sha256": {
          "name": "sha256",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "uploader_id": {
          "name": "uploader_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "format": {
          "name": "format",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "signature": {
          "name": "signature",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "signed_by": {
          "name": "signed_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "files_uploader_id_users_id_fk": {
          "name": "files_uploader_id_users_id_fk",
          "tableFrom": "files",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "uploader_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "files_signed_by_users_id_fk": {
          "name": "files_signed_by_users_id_fk",
          "tableFrom": "files",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "signed_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "files_cid_unique": {
          "name": "files_cid_unique",
          "nullsNotDistinct": false,
          "columns": [
            "cid"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.forestai_providers": {
      "name": "forestai_providers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "forestai_providers_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.key_to_user": {
      "name": "key_to_user",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "key_to_user_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "public_key": {
          "name": "public_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "key_type": {
          "name": "key_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'secp256k1n'"
        },
        "user_uuid": {
          "name": "user_uuid",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "key_signing_uuid": {
          "name": "key_signing_uuid",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "key_to_user_user_uuid_users_id_fk": {
          "name": "key_to_user_user_uuid_users_id_fk",
          "tableFrom": "key_to_user",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_uuid"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "public_key_unique": {
          "name": "public_key_unique",
          "nullsNotDistinct": false,
          "columns": [
            "public_key"
          ]
        },
        "user_uuid_public_key_unique": {
          "name": "user_uuid_public_key_unique",
          "nullsNotDistinct": false,
          "columns": [
            "user_uuid",
            "public_key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.org_domains": {
      "name": "org_domains",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "org_domains_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "org_id": {
          "name": "org_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "domain": {
          "name": "domain",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "org_domains_org_id_orgs_id_fk": {
          "name": "org_domains_org_id_orgs_id_fk",
          "tableFrom": "org_domains",
          "tableTo": "orgs",
          "columnsFrom": [
            "org_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "org_domains_domain_unique": {
          "name": "org_domains_domain_unique",
          "nullsNotDistinct": false,
          "columns": [
            "domain"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.org_to_people": {
      "name": "org_to_people",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "org_to_people_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "org_id": {
          "name": "org_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "org_to_people_org_id_orgs_id_fk": {
          "name": "org_to_people_org_id_orgs_id_fk",
          "tableFrom": "org_to_people",
          "tableTo": "orgs",
          "columnsFrom": [
            "org_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "org_to_people_user_id_users_id_fk": {
          "name": "org_to_people_user_id_users_id_fk",
          "tableFrom": "org_to_people",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "org_id_user_id_unique": {
          "name": "org_id_user_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "org_id",
            "user_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.orgs": {
      "name": "orgs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "orgs_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "web_page": {
          "name": "web_page",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "alpha_two_code": {
          "name": "alpha_two_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country": {
          "name": "country",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.prompt_reviews_review_flags": {
      "name": "prompt_reviews_review_flags",
      "schema": "",
      "columns": {
        "prompt_review_id": {
          "name": "prompt_review_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "flag_id": {
          "name": "flag_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "prompt_reviews_review_flags_prompt_review_id_prompt_reviews_id_fk": {
          "name": "prompt_reviews_review_flags_prompt_review_id_prompt_reviews_id_fk",
          "tableFrom": "prompt_reviews_review_flags",
          "tableTo": "prompt_reviews",
          "columnsFrom": [
            "prompt_review_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "prompt_reviews_review_flags_flag_id_review_flags_id_fk": {
          "name": "prompt_reviews_review_flags_flag_id_review_flags_id_fk",
          "tableFrom": "prompt_reviews_review_flags",
          "tableTo": "review_flags",
          "columnsFrom": [
            "flag_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "prompt_reviews_review_flags_prompt_review_id_flag_id_pk": {
          "name": "prompt_reviews_review_flags_prompt_review_id_flag_id_pk",
          "columns": [
            "prompt_review_id",
            "flag_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.prompt_reviews": {
      "name": "prompt_reviews",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "prompt_reviews_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "opinion": {
          "name": "opinion",
          "type": "varchar(8)",
          "primaryKey": false,
          "notNull": true
        },
        "comment": {
          "name": "comment",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "prompt_id": {
          "name": "prompt_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "prompt_reviews_user_id_users_id_fk": {
          "name": "prompt_reviews_user_id_users_id_fk",
          "tableFrom": "prompt_reviews",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "prompt_reviews_prompt_id_prompts_id_fk": {
          "name": "prompt_reviews_prompt_id_prompts_id_fk",
          "tableFrom": "prompt_reviews",
          "tableTo": "prompts",
          "columnsFrom": [
            "prompt_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "id_user_id_prompt_id_unique": {
          "name": "id_user_id_prompt_id_unique",
          "nullsNotDistinct": true,
          "columns": [
            "user_id",
            "prompt_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.prompt_set_invitations": {
      "name": "prompt_set_invitations",
      "schema": "",
      "columns": {
        "code": {
          "name": "code",
          "type": "varchar(32)",
          "primaryKey": true,
          "notNull": true
        },
        "prompt_set_id": {
          "name": "prompt_set_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "used_at": {
          "name": "used_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "revoked_at": {
          "name": "revoked_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "prompt_set_invitations_prompt_set_id_prompt_sets_id_fk": {
          "name": "prompt_set_invitations_prompt_set_id_prompt_sets_id_fk",
          "tableFrom": "prompt_set_invitations",
          "tableTo": "prompt_sets",
          "columnsFrom": [
            "prompt_set_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "prompt_set_invitations_created_by_users_id_fk": {
          "name": "prompt_set_invitations_created_by_users_id_fk",
          "tableFrom": "prompt_set_invitations",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.prompt_set_prompts": {
      "name": "prompt_set_prompts",
      "schema": "",
      "columns": {
        "prompt_set_id": {
          "name": "prompt_set_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "prompt_id": {
          "name": "prompt_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "prompt_set_prompts_prompt_set_id_prompt_sets_id_fk": {
          "name": "prompt_set_prompts_prompt_set_id_prompt_sets_id_fk",
          "tableFrom": "prompt_set_prompts",
          "tableTo": "prompt_sets",
          "columnsFrom": [
            "prompt_set_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "prompt_set_prompts_prompt_id_prompts_id_fk": {
          "name": "prompt_set_prompts_prompt_id_prompts_id_fk",
          "tableFrom": "prompt_set_prompts",
          "tableTo": "prompts",
          "columnsFrom": [
            "prompt_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "prompt_set_prompts_prompt_set_id_prompt_id_pk": {
          "name": "prompt_set_prompts_prompt_set_id_prompt_id_pk",
          "columns": [
            "prompt_set_id",
            "prompt_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.prompt_set_tags": {
      "name": "prompt_set_tags",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "prompt_set_tags_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "prompt_set_id": {
          "name": "prompt_set_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "tag": {
          "name": "tag",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "prompt_set_tags_prompt_set_id_prompt_sets_id_fk": {
          "name": "prompt_set_tags_prompt_set_id_prompt_sets_id_fk",
          "tableFrom": "prompt_set_tags",
          "tableTo": "prompt_sets",
          "columnsFrom": [
            "prompt_set_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.prompt_sets": {
      "name": "prompt_sets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "prompt_sets_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "citationInfo": {
          "name": "citationInfo",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "category": {
          "name": "category",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true,
          "default": "'Default'"
        },
        "license": {
          "name": "license",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true,
          "default": "'cc-by-4.0'"
        },
        "owner_id": {
          "name": "owner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "is_public": {
          "name": "is_public",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_public_submissions_allowed": {
          "name": "is_public_submissions_allowed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "prompt_sets_owner_id_users_id_fk": {
          "name": "prompt_sets_owner_id_users_id_fk",
          "tableFrom": "prompt_sets",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "owner_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "prompt_sets_title_unique": {
          "name": "prompt_sets_title_unique",
          "nullsNotDistinct": false,
          "columns": [
            "title"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.prompts": {
      "name": "prompts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "file_id": {
          "name": "file_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": true,
          "default": "'multiple-choice'"
        },
        "question": {
          "name": "question",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "cid": {
          "name": "cid",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sha256": {
          "name": "sha256",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "options": {
          "name": "options",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "answer_key": {
          "name": "answer_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "answer": {
          "name": "answer",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "full_prompt": {
          "name": "full_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "full_prompt_cid": {
          "name": "full_prompt_cid",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "full_prompt_sha256": {
          "name": "full_prompt_sha256",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "prompts_file_id_files_id_fk": {
          "name": "prompts_file_id_files_id_fk",
          "tableFrom": "prompts",
          "tableTo": "files",
          "columnsFrom": [
            "file_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.review_flags": {
      "name": "review_flags",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "review_flags_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "flag": {
          "name": "flag",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "opinion": {
          "name": "opinion",
          "type": "varchar(8)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "review_flags_flag_unique": {
          "name": "review_flags_flag_unique",
          "nullsNotDistinct": false,
          "columns": [
            "flag"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.rss_articles": {
      "name": "rss_articles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "is_processed": {
          "name": "is_processed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "source_url": {
          "name": "source_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.test_result_reviews_review_flags": {
      "name": "test_result_reviews_review_flags",
      "schema": "",
      "columns": {
        "test_result_review_id": {
          "name": "test_result_review_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "flag_id": {
          "name": "flag_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "test_result_reviews_review_flags_test_result_review_id_test_result_reviews_id_fk": {
          "name": "test_result_reviews_review_flags_test_result_review_id_test_result_reviews_id_fk",
          "tableFrom": "test_result_reviews_review_flags",
          "tableTo": "test_result_reviews",
          "columnsFrom": [
            "test_result_review_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "test_result_reviews_review_flags_flag_id_review_flags_id_fk": {
          "name": "test_result_reviews_review_flags_flag_id_review_flags_id_fk",
          "tableFrom": "test_result_reviews_review_flags",
          "tableTo": "review_flags",
          "columnsFrom": [
            "flag_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "test_result_reviews_review_flags_test_result_review_id_flag_id_pk": {
          "name": "test_result_reviews_review_flags_test_result_review_id_flag_id_pk",
          "columns": [
            "test_result_review_id",
            "flag_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.test_result_reviews": {
      "name": "test_result_reviews",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "test_result_reviews_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "opinion": {
          "name": "opinion",
          "type": "varchar(8)",
          "primaryKey": false,
          "notNull": true
        },
        "comment": {
          "name": "comment",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "test_result_id": {
          "name": "test_result_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "property": {
          "name": "property",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "test_result_reviews_user_id_users_id_fk": {
          "name": "test_result_reviews_user_id_users_id_fk",
          "tableFrom": "test_result_reviews",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "test_result_reviews_test_result_id_test_results_id_fk": {
          "name": "test_result_reviews_test_result_id_test_results_id_fk",
          "tableFrom": "test_result_reviews",
          "tableTo": "test_results",
          "columnsFrom": [
            "test_result_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "id_user_id_test_result_id_property_unique": {
          "name": "id_user_id_test_result_id_property_unique",
          "nullsNotDistinct": true,
          "columns": [
            "user_id",
            "test_result_id",
            "property"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.test_results": {
      "name": "test_results",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "test_results_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "score": {
          "name": "score",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "evaluation_id": {
          "name": "evaluation_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "finished_at": {
          "name": "finished_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "result": {
          "name": "result",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "test_name": {
          "name": "test_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "raw": {
          "name": "raw",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "model_name": {
          "name": "model_name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "model_host": {
          "name": "model_host",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'auto'"
        },
        "model_owner": {
          "name": "model_owner",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "model_id": {
          "name": "model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "task_id": {
          "name": "task_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "response": {
          "name": "response",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cid": {
          "name": "cid",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sha256": {
          "name": "sha256",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "prompt_id": {
          "name": "prompt_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "test_results_evaluation_id_evaluations_id_fk": {
          "name": "test_results_evaluation_id_evaluations_id_fk",
          "tableFrom": "test_results",
          "tableTo": "evaluations",
          "columnsFrom": [
            "evaluation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "test_results_prompt_id_prompts_id_fk": {
          "name": "test_results_prompt_id_prompts_id_fk",
          "tableFrom": "test_results",
          "tableTo": "prompts",
          "columnsFrom": [
            "prompt_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_answers": {
      "name": "user_answers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "user_answers_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "prompt_id": {
          "name": "prompt_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "selected_option": {
          "name": "selected_option",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_correct": {
          "name": "is_correct",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_answers_user_id_users_id_fk": {
          "name": "user_answers_user_id_users_id_fk",
          "tableFrom": "user_answers",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "user_answers_prompt_id_prompts_id_fk": {
          "name": "user_answers_prompt_id_prompts_id_fk",
          "tableFrom": "user_answers",
          "tableTo": "prompts",
          "columnsFrom": [
            "prompt_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_profile": {
      "name": "user_profile",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "identity": {
            "type": "byDefault",
            "name": "user_profile_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "github": {
          "name": "github",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "website": {
          "name": "website",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "bluesky": {
          "name": "bluesky",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "mastodon": {
          "name": "mastodon",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "twitter": {
          "name": "twitter",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "invited_by": {
          "name": "invited_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_profile_user_id_users_id_fk": {
          "name": "user_profile_user_id_users_id_fk",
          "tableFrom": "user_profile",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "user_profile_invited_by_users_id_fk": {
          "name": "user_profile_invited_by_users_id_fk",
          "tableFrom": "user_profile",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "invited_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_id_unique": {
          "name": "user_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "user_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_role_on_prompt_set": {
      "name": "user_role_on_prompt_set",
      "schema": "",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "prompt_set_id": {
          "name": "prompt_set_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_role_on_prompt_set_user_id_users_id_fk": {
          "name": "user_role_on_prompt_set_user_id_users_id_fk",
          "tableFrom": "user_role_on_prompt_set",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "user_role_on_prompt_set_prompt_set_id_prompt_sets_id_fk": {
          "name": "user_role_on_prompt_set_prompt_set_id_prompt_sets_id_fk",
          "tableFrom": "user_role_on_prompt_set",
          "tableTo": "prompt_sets",
          "columnsFrom": [
            "prompt_set_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "user_role_on_prompt_set_user_id_prompt_set_id_pk": {
          "name": "user_role_on_prompt_set_user_id_prompt_set_id_pk",
          "columns": [
            "user_id",
            "prompt_set_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.v_leaderboard": {
      "columns": {
        "prompt_set_id": {
          "name": "prompt_set_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "select \n    CASE\n      WHEN \"test_results\".\"model_name\" IS NOT NULL THEN \"test_results\".\"model_name\"\n      ELSE \"test_results\".\"provider\"\n    END\n   as \"model\", \n    CASE\n      WHEN \"evaluations\".\"prompt_set_id\" IS NOT NULL THEN \"prompt_sets\".\"title\"\n      ELSE \"evaluations\".\"protocol_name\"\n    END\n   as \"context\", \n    CASE\n      WHEN \"evaluations\".\"prompt_set_id\" IS NULL THEN AVG(\"evaluations\".\"score\")\n      ELSE NULL\n    END\n   as \"avg_score\", \n    CASE\n      WHEN \"evaluations\".\"prompt_set_id\" IS NULL THEN NULL\n      ELSE SUM(\"test_results\".\"score\") / COUNT(\"test_results\".\"id\")\n    END\n   as \"accuracy\", \n    COUNT(DISTINCT \"evaluations\".\"id\")\n   as \"total_evaluations\", \n    MAX(\"evaluations\".\"finished_at\")\n   as \"recent_evaluation\", \n    CASE\n      WHEN \"evaluations\".\"prompt_set_id\" IS NOT NULL\n      THEN COUNT(DISTINCT \"prompts\".\"id\")\n      ELSE NULL\n    END\n   as \"unique_prompts\", \n    COUNT(\"test_results\".\"id\")\n   as \"total_tests_performed\", \"evaluations\".\"prompt_set_id\", \"prompts\".\"type\" as \"prompt_type\" from \"test_results\" inner join \"evaluations\" on \"test_results\".\"evaluation_id\" = \"evaluations\".\"id\" left join \"prompt_sets\" on \"evaluations\".\"prompt_set_id\" = \"prompt_sets\".\"id\" left join \"prompts\" on \"test_results\".\"prompt_id\" = \"prompts\".\"id\" group by \"model\", \"context\", \"prompts\".\"type\", \"evaluations\".\"prompt_set_id\" having (\n        (\n          CASE WHEN \"evaluations\".\"prompt_set_id\" IS NULL\n            THEN AVG(\"evaluations\".\"score\")\n            ELSE NULL\n          END\n        ) > 0\n       or \n        (\n          CASE WHEN \"evaluations\".\"prompt_set_id\" IS NULL\n            THEN NULL\n            ELSE SUM(\"test_results\".\"score\") / COUNT(\"test_results\".\"id\")\n          END\n        ) > 0\n      )",
      "name": "v_leaderboard",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}