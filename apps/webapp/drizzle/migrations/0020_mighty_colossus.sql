CREATE TABLE "key_to_user" (
	"id" integer PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY (sequence name "key_to_user_id_seq" INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START WITH 1 CACHE 1),
	"public_key" text NOT NULL,
	"key_type" varchar(50) DEFAULT 'ethereum' NOT NULL,
	"user_uuid" uuid NOT NULL,
	"key_signing_uuid" uuid NOT NULL,
	"created_at" timestamp DEFAULT now() NOT NULL,
	"updated_at" timestamp DEFAULT now() NOT NULL,
	CONSTRAINT "public_key_unique" UNIQUE("public_key"),
	CONSTRAINT "user_uuid_key_type_unique" UNIQUE("user_uuid","key_type")
);
--> statement-breakpoint
ALTER TABLE "key_to_user" ADD CONSTRAINT "key_to_user_user_uuid_users_id_fk" FOREIGN KEY ("user_uuid") REFERENCES "auth"."users"("id") ON DELETE cascade ON UPDATE cascade;