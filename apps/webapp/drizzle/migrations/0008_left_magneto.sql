ALTER TABLE "prompt_feedbacks"
DROP CONSTRAINT "prompt_feedbacks_feedback_id_feedbacks_id_fk";

--> statement-breakpoint
ALTER TABLE "prompt_feedbacks"
DROP COLUMN "feedback_id";

ALTER TABLE "prompt_feedbacks"
ADD COLUMN "id" integer PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY (
    sequence name "prompt_feedbacks_id_seq" INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START
    WITH
        1 CACHE 1
);

--> statement-breakpoint
ALTER TABLE "prompt_feedbacks"
ADD COLUMN "user_id" uuid NOT NULL;

--> statement-breakpoint
ALTER TABLE "prompt_feedbacks"
ADD COLUMN "feedback" text NOT NULL;

--> statement-breakpoint
ALTER TABLE "prompt_feedbacks"
ADD COLUMN "flag" text NOT NULL;

--> statement-breakpoint
ALTER TABLE "prompt_feedbacks"
ADD COLUMN "created_at" timestamp DEFAULT now () NOT NULL;

--> statement-breakpoint
ALTER TABLE "prompt_feedbacks" ADD CONSTRAINT "prompt_feedbacks_user_id_users_id_fk" FOREIGN KEY ("user_id") REFERENCES "auth"."users" ("id") ON DELETE cascade ON UPDATE cascade;

--> statement-breakpoint